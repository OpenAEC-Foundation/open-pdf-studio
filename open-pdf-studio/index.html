<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OpenPDFStudio</title>
  <script src="pdfjs/build/pdf.mjs" type="module" id="pdfjs-script"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Title Bar -->
  <div class="title-bar">
    <div class="title-bar-left">
      <div class="title-bar-menus">
        <div class="menu-item" data-menu="file">
          <span class="menu-label">File</span>
          <div class="menu-dropdown" id="menu-file">
            <div class="menu-option" id="menu-open">
              <span class="menu-option-label">Open...</span>
              <span class="menu-option-shortcut">Ctrl+O</span>
            </div>
            <div class="menu-option" id="menu-save">
              <span class="menu-option-label">Save</span>
              <span class="menu-option-shortcut">Ctrl+S</span>
            </div>
            <div class="menu-option" id="menu-save-as">
              <span class="menu-option-label">Save As...</span>
              <span class="menu-option-shortcut">Ctrl+Shift+S</span>
            </div>
            <div class="menu-divider"></div>
            <div class="menu-option" id="menu-doc-properties">
              <span class="menu-option-label">Document Properties...</span>
              <span class="menu-option-shortcut">Ctrl+D</span>
            </div>
            <div class="menu-divider"></div>
            <div class="menu-option" id="menu-preferences">
              <span class="menu-option-label">Preferences...</span>
              <span class="menu-option-shortcut">Ctrl+,</span>
            </div>
            <div class="menu-divider"></div>
            <div class="menu-option" id="menu-exit">
              <span class="menu-option-label">Exit</span>
              <span class="menu-option-shortcut">Alt+F4</span>
            </div>
          </div>
        </div>
      </div>
      <!-- Quick Access Toolbar -->
      <div class="quick-access-toolbar">
        <button class="quick-access-btn" id="qa-save" title="Save (Ctrl+S)">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V7l-4-4z"/>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 3v4a1 1 0 01-1 1H8"/>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 14h10v7H7z"/>
          </svg>
        </button>
        <button class="quick-access-btn" id="qa-print" title="Print (Ctrl+P)">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
          </svg>
        </button>
        <div class="quick-access-separator"></div>
        <button class="quick-access-btn" id="qa-undo" title="Undo (Ctrl+Z)">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"/>
          </svg>
        </button>
        <button class="quick-access-btn" id="qa-redo" title="Redo (Ctrl+Y)">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 10H11a8 8 0 00-8 8v2m18-10l-6 6m6-6l-6-6"/>
          </svg>
        </button>
        <div class="quick-access-separator"></div>
        <button class="quick-access-btn" id="qa-prev-view" title="Previous View">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"/>
          </svg>
        </button>
        <button class="quick-access-btn" id="qa-next-view" title="Next View">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
          </svg>
        </button>
      </div>
    </div>
    <div class="title-bar-center">
      <span class="app-title">OpenPDFStudio</span>
      <span class="file-name" id="file-info"></span>
    </div>
    <div class="window-controls">
      <button class="window-btn" id="btn-minimize" title="Minimize">
        <svg width="10" height="1" viewBox="0 0 10 1"><rect width="10" height="1" fill="currentColor"/></svg>
      </button>
      <button class="window-btn" id="btn-maximize" title="Maximize">
        <svg width="10" height="10" viewBox="0 0 10 10"><rect x="0.5" y="0.5" width="9" height="9" fill="none" stroke="currentColor" stroke-width="1.2"/></svg>
      </button>
      <button class="window-btn window-btn-close" id="btn-close" title="Close">
        <svg width="10" height="10" viewBox="0 0 10 10"><line x1="0" y1="0" x2="10" y2="10" stroke="currentColor" stroke-width="1.2"/><line x1="10" y1="0" x2="0" y2="10" stroke="currentColor" stroke-width="1.2"/></svg>
      </button>
    </div>
  </div>

  <!-- Ribbon -->
  <div class="ribbon-container">
    <!-- Ribbon Tabs -->
    <div class="ribbon-tabs">
      <button class="ribbon-tab active" data-tab="home">Home</button>
      <button class="ribbon-tab" data-tab="comment">Comment</button>
      <button class="ribbon-tab" data-tab="view">View</button>
      <button class="ribbon-tab" data-tab="edit">Edit</button>
      <button class="ribbon-tab" data-tab="forms">Forms</button>
      <button class="ribbon-tab" data-tab="organize">Organize</button>
      <button class="ribbon-tab" data-tab="help">Help</button>
    </div>

    <!-- Home Tab Content -->
    <div class="ribbon-content active" id="tab-home">
      <div class="ribbon-groups">
        <!-- Tools Group -->
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn active" id="tool-select" title="Select">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Select</span>
            </button>
            <button class="ribbon-btn" id="tool-hand" title="Hand Tool">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Hand</span>
            </button>
          </div>
          <div class="ribbon-group-label">Tools</div>
        </div>

        <!-- Zoom Group - Small stacked buttons -->
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <div class="ribbon-btn-stack">
              <button class="ribbon-btn small" id="zoom-in-ribbon" title="Zoom In">
                <div class="ribbon-btn-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7"/>
                  </svg>
                </div>
                <span class="ribbon-btn-label">Zoom In</span>
              </button>
              <button class="ribbon-btn small" id="zoom-out-ribbon" title="Zoom Out">
                <div class="ribbon-btn-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"/>
                  </svg>
                </div>
                <span class="ribbon-btn-label">Zoom Out</span>
              </button>
              <button class="ribbon-btn small" id="fit-width" title="Fit Width">
                <div class="ribbon-btn-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/>
                  </svg>
                </div>
                <span class="ribbon-btn-label">Fit Width</span>
              </button>
            </div>
          </div>
          <div class="ribbon-group-label">Zoom</div>
        </div>

        <!-- Page Navigation - Small stacked + large buttons -->
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <div class="ribbon-btn-stack">
              <button class="ribbon-btn small" id="first-page" title="First Page">
                <div class="ribbon-btn-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"/>
                  </svg>
                </div>
                <span class="ribbon-btn-label">First</span>
              </button>
              <button class="ribbon-btn small" id="prev-page-ribbon" title="Previous Page">
                <div class="ribbon-btn-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                  </svg>
                </div>
                <span class="ribbon-btn-label">Previous</span>
              </button>
              <button class="ribbon-btn small" id="next-page-ribbon" title="Next Page">
                <div class="ribbon-btn-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                  </svg>
                </div>
                <span class="ribbon-btn-label">Next</span>
              </button>
            </div>
            <button class="ribbon-btn" id="last-page" title="Last Page">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Last</span>
            </button>
          </div>
          <div class="ribbon-group-label">Navigate</div>
        </div>

        <!-- Find Group -->
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn" id="ribbon-find" title="Find (Ctrl+F)">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Find</span>
            </button>
          </div>
          <div class="ribbon-group-label">Find</div>
        </div>
      </div>
    </div>

    <!-- Comment Tab Content -->
    <div class="ribbon-content" id="tab-comment">
      <div class="ribbon-groups">
        <!-- Highlight & Drawing -->
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn" id="tool-highlight" title="Highlight">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10M3 10h18M3 14h18"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Highlight</span>
            </button>
            <button class="ribbon-btn" id="tool-draw" title="Freehand">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Freehand</span>
            </button>
            <div class="ribbon-btn-stack">
              <button class="ribbon-btn small" id="tool-line" title="Line">
                <div class="ribbon-btn-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 19l14-14"/>
                  </svg>
                </div>
                <span class="ribbon-btn-label">Line</span>
              </button>
              <button class="ribbon-btn small" id="tool-arrow" title="Arrow">
                <div class="ribbon-btn-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 19l14-14"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 5l-6 0m6 0l0 6"/>
                  </svg>
                </div>
                <span class="ribbon-btn-label">Arrow</span>
              </button>
              <button class="ribbon-btn small" id="tool-polyline" title="Polyline (double-click to finish)">
                <div class="ribbon-btn-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 18L9 10L14 14L20 6"/>
                  </svg>
                </div>
                <span class="ribbon-btn-label">Polyline</span>
              </button>
            </div>
          </div>
          <div class="ribbon-group-label">Drawing</div>
        </div>

        <!-- Shapes -->
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn" id="tool-box" title="Rectangle">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <rect x="4" y="4" width="16" height="16" rx="2" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Rect</span>
            </button>
            <button class="ribbon-btn" id="tool-circle" title="Ellipse">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <circle cx="12" cy="12" r="9" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Ellipse</span>
            </button>
            <div class="ribbon-btn-stack">
              <button class="ribbon-btn small" id="tool-polygon" title="Polygon">
                <div class="ribbon-btn-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                  </svg>
                </div>
                <span class="ribbon-btn-label">Polygon</span>
              </button>
              <button class="ribbon-btn small" id="tool-cloud" title="Cloud">
                <div class="ribbon-btn-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"/>
                  </svg>
                </div>
                <span class="ribbon-btn-label">Cloud</span>
              </button>
            </div>
          </div>
          <div class="ribbon-group-label">Shapes</div>
        </div>

        <!-- Text & Notes -->
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn" id="tool-text" title="Text">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Text</span>
            </button>
            <button class="ribbon-btn" id="tool-textbox" title="Text Box">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                  <rect x="3" y="5" width="18" height="14" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Text Box</span>
            </button>
            <button class="ribbon-btn" id="tool-comment" title="Note">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Note</span>
            </button>
            <button class="ribbon-btn" id="tool-callout" title="Callout">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Callout</span>
            </button>
          </div>
          <div class="ribbon-group-label">Text</div>
        </div>

        <!-- Properties -->
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <div class="ribbon-btn-stack">
              <div class="ribbon-input-row">
                <label class="ribbon-input-label">Color</label>
                <input type="color" id="color-picker" class="ribbon-color-input" value="#ffff00">
              </div>
              <div class="ribbon-input-row">
                <label class="ribbon-input-label">Width</label>
                <input type="number" id="line-width" class="ribbon-input" min="1" max="20" value="3">
              </div>
            </div>
          </div>
          <div class="ribbon-group-label">Properties</div>
        </div>

        <!-- Actions -->
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <div class="ribbon-btn-stack">
              <button class="ribbon-btn small" id="tool-undo" title="Undo">
                <div class="ribbon-btn-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"/>
                  </svg>
                </div>
                <span class="ribbon-btn-label">Undo</span>
              </button>
              <button class="ribbon-btn small" id="tool-clear" title="Clear Page Annotations">
                <div class="ribbon-btn-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                  </svg>
                </div>
                <span class="ribbon-btn-label">Clear Page</span>
              </button>
              <button class="ribbon-btn small" id="ribbon-clear-all" title="Clear All Annotations">
                <div class="ribbon-btn-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2zM12 11V7"/>
                  </svg>
                </div>
                <span class="ribbon-btn-label">Clear All</span>
              </button>
            </div>
          </div>
          <div class="ribbon-group-label">Edit</div>
        </div>
      </div>
    </div>

    <!-- View Tab Content -->
    <div class="ribbon-content" id="tab-view">
      <div class="ribbon-groups">
        <!-- Page Display -->
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn" id="single-page" title="Single Page">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Single</span>
            </button>
            <button class="ribbon-btn" id="continuous" title="Continuous">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Continuous</span>
            </button>
          </div>
          <div class="ribbon-group-label">Page Display</div>
        </div>

        <!-- Rotate -->
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn" id="rotate-left" title="Rotate Left">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Rotate Left</span>
            </button>
            <button class="ribbon-btn" id="rotate-right" title="Rotate Right">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 10H11a8 8 0 00-8 8v2m18-10l-6 6m6-6l-6-6"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Rotate Right</span>
            </button>
          </div>
          <div class="ribbon-group-label">Rotate</div>
        </div>

        <!-- Zoom -->
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn" id="ribbon-zoom-in" title="Zoom In (Ctrl++)">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Zoom In</span>
            </button>
            <button class="ribbon-btn" id="ribbon-zoom-out" title="Zoom Out (Ctrl+-)">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Zoom Out</span>
            </button>
            <button class="ribbon-btn" id="view-actual-size" title="Actual Size (Ctrl+0)">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">100%</span>
            </button>
            <button class="ribbon-btn" id="view-fit-width" title="Fit Width (Ctrl+1)">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Fit Width</span>
            </button>
            <button class="ribbon-btn" id="view-fit-page" title="Fit Page (Ctrl+2)">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Fit Page</span>
            </button>
          </div>
          <div class="ribbon-group-label">Zoom</div>
        </div>

        <!-- Panels -->
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn" id="ribbon-nav-panel" title="Navigation Panel (F9)">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Navigation</span>
            </button>
            <button class="ribbon-btn" id="ribbon-properties-panel" title="Properties Panel (F12)">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Properties</span>
            </button>
            <button class="ribbon-btn" id="ribbon-annotations-list" title="Annotations List (F11)">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Annotations</span>
            </button>
          </div>
          <div class="ribbon-group-label">Panels</div>
        </div>
      </div>
    </div>

    <!-- Edit Tab Content -->
    <div class="ribbon-content" id="tab-edit">
      <div class="ribbon-groups">
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn large" id="edit-text" title="Edit Text">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Edit Text</span>
            </button>
          </div>
          <div class="ribbon-group-label">Content</div>
        </div>
      </div>
    </div>

    <!-- Forms Tab Content -->
    <div class="ribbon-content" id="tab-forms">
      <div class="ribbon-groups">
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn" id="form-text-field" title="Text Field">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Text Field</span>
            </button>
            <button class="ribbon-btn" id="form-checkbox" title="Checkbox">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Checkbox</span>
            </button>
            <button class="ribbon-btn" id="form-radio" title="Radio Button">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <circle cx="12" cy="12" r="10" stroke-width="2"/>
                  <circle cx="12" cy="12" r="4" fill="currentColor"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Radio</span>
            </button>
          </div>
          <div class="ribbon-group-label">Form Fields</div>
        </div>
      </div>
    </div>

    <!-- Organize Tab Content -->
    <div class="ribbon-content" id="tab-organize">
      <div class="ribbon-groups">
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn" id="insert-page" title="Insert Page">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Insert</span>
            </button>
            <button class="ribbon-btn" id="delete-page" title="Delete Page">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Delete</span>
            </button>
            <button class="ribbon-btn" id="extract-pages" title="Extract Pages">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Extract</span>
            </button>
          </div>
          <div class="ribbon-group-label">Pages</div>
        </div>
      </div>
    </div>

    <!-- Help Tab Content -->
    <div class="ribbon-content" id="tab-help">
      <div class="ribbon-groups">
        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn" id="ribbon-about" title="About OpenPDFStudio">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">About</span>
            </button>
            <button class="ribbon-btn" id="ribbon-shortcuts" title="Keyboard Shortcuts (F1)">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Shortcuts</span>
            </button>
          </div>
          <div class="ribbon-group-label">Information</div>
        </div>

        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn" id="ribbon-check-updates" title="Check for Updates">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">Updates</span>
            </button>
          </div>
          <div class="ribbon-group-label">Updates</div>
        </div>

        <div class="ribbon-group">
          <div class="ribbon-group-content">
            <button class="ribbon-btn" id="ribbon-file-assoc" title="Set Default PDF Application">
              <div class="ribbon-btn-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
              </div>
              <span class="ribbon-btn-label">File Associations</span>
            </button>
          </div>
          <div class="ribbon-group-label">File Association</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Document Tabs Bar -->
  <div class="document-tabs" id="document-tabs">
    <div class="document-tabs-empty" id="no-docs-message">No documents open</div>
  </div>

  <!-- Main Content -->
  <div class="content">
    <!-- Left Panel -->
    <div class="left-panel" id="left-panel">
      <div class="left-panel-tabs">
        <button class="left-panel-tab active" data-panel="thumbnails" title="Page Thumbnails">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="9" rx="1"/>
            <rect x="14" y="3" width="7" height="9" rx="1"/>
            <rect x="3" y="15" width="7" height="6" rx="1"/>
            <rect x="14" y="15" width="7" height="6" rx="1"/>
          </svg>
          <span>Pages</span>
        </button>
        <button class="left-panel-tab" data-panel="bookmarks" title="Bookmarks">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
          </svg>
          <span>Bookmarks</span>
        </button>
      </div>

      <!-- Thumbnails Panel -->
      <div class="left-panel-content active" id="thumbnails-panel">
        <div class="left-panel-header">
          <span>Page Thumbnails</span>
        </div>
        <div class="thumbnails-container" id="thumbnails-container">
          <!-- Thumbnails will be dynamically added here -->
        </div>
      </div>

      <!-- Bookmarks Panel -->
      <div class="left-panel-content" id="bookmarks-panel">
        <div class="left-panel-header">
          <span>Bookmarks</span>
        </div>
        <div class="bookmarks-container" id="bookmarks-container">
          <div class="bookmarks-empty">No bookmarks in this document</div>
        </div>
      </div>

      <button class="left-panel-toggle" id="left-panel-toggle" title="Toggle Panel">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15 18 9 12 15 6"/>
        </svg>
      </button>
    </div>

    <div class="main-view">
      <!-- Find Bar -->
      <div id="find-bar" class="find-bar">
        <button id="find-close-btn" class="find-close-btn" title="Close (Esc)">&times;</button>
        <div class="find-input-container">
          <input type="text" id="find-input" class="find-input" placeholder="Find in document..." autocomplete="off">
        </div>
        <div class="find-nav-buttons">
          <button id="find-prev-btn" class="find-nav-btn" title="Previous (Shift+Enter)" disabled>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M15 18l-6-6 6-6"/>
            </svg>
          </button>
          <button id="find-next-btn" class="find-nav-btn" title="Next (Enter)" disabled>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 18l6-6-6-6"/>
            </svg>
          </button>
        </div>
        <span id="find-results-count" class="find-results-count"></span>
        <span id="find-message" class="find-message"></span>
        <div class="find-options">
          <label class="find-option">
            <input type="checkbox" id="find-match-case">
            <span>Match case</span>
          </label>
          <label class="find-option">
            <input type="checkbox" id="find-whole-word">
            <span>Whole words</span>
          </label>
          <label class="find-option">
            <input type="checkbox" id="find-highlight-all" checked>
            <span>Highlight all</span>
          </label>
        </div>
      </div>

      <div id="placeholder">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
        </svg>
        <h2>No PDF Selected</h2>
        <p>Click "Open PDF" to browse and annotate a PDF</p>
      </div>

      <div id="pdf-container">
        <div id="canvas-wrapper">
          <!-- Single page mode -->
          <div id="canvas-container" class="single-page-container">
            <canvas id="pdf-canvas"></canvas>
            <canvas id="annotation-canvas"></canvas>
          </div>
          <!-- Continuous mode -->
          <div id="continuous-container" class="continuous-container">
            <!-- Pages will be dynamically added here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Annotations List Panel -->
    <div class="annotations-list-panel" id="annotations-list-panel">
      <h3>Annotations</h3>
      <div class="annotations-list-header">
        <div class="annotations-list-filter">
          <label>Show:</label>
          <select id="annotations-list-filter">
            <option value="all">All Pages</option>
            <option value="current">Current Page</option>
          </select>
        </div>
      </div>
      <div class="annotations-list-content" id="annotations-list-content">
        <!-- Annotation items will be dynamically added here -->
      </div>
      <div class="annotations-list-count" id="annotations-list-count">
        0 annotations
      </div>
    </div>

    <!-- Properties Panel -->
    <div class="properties-panel" id="properties-panel">
      <h3>Annotation Properties</h3>

      <!-- General Section -->
      <div class="property-section" id="prop-general-section">
        <div class="property-section-header">General</div>

        <div class="property-group" id="prop-type-group">
          <label>Type</label>
          <input type="text" id="prop-type" readonly>
        </div>

        <div class="property-group" id="prop-subject-group">
          <label>Subject</label>
          <input type="text" id="prop-subject" placeholder="Enter subject...">
        </div>

        <div class="property-group" id="prop-author-group">
          <label>Author</label>
          <input type="text" id="prop-author">
        </div>

        <div class="property-group" id="prop-created-group">
          <label>Created</label>
          <input type="text" id="prop-created" readonly class="prop-date">
        </div>

        <div class="property-group" id="prop-modified-group">
          <label>Modified</label>
          <input type="text" id="prop-modified" readonly class="prop-date">
        </div>

        <div class="property-group" id="prop-locked-group">
          <label>Locked</label>
          <select id="prop-locked">
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>
        </div>

        <div class="property-group" id="prop-printable-group">
          <label>Printable</label>
          <select id="prop-printable">
            <option value="yes">Yes</option>
            <option value="no">No</option>
          </select>
        </div>

        <div class="property-group" id="prop-readonly-group">
          <label>Read Only</label>
          <select id="prop-readonly">
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>
        </div>

        <div class="property-group" id="prop-marked-group">
          <label>Marked</label>
          <select id="prop-marked">
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>
        </div>
      </div>

      <!-- Appearance Section -->
      <div class="property-section" id="prop-appearance-section">
        <div class="property-section-header">Appearance</div>

        <div class="property-group" id="prop-icon-group" style="display: none;">
          <label>Icon</label>
          <select id="prop-icon">
            <option value="comment">Comment</option>
            <option value="note">Note</option>
            <option value="help">Help</option>
            <option value="insert">Insert</option>
            <option value="key">Key</option>
            <option value="newparagraph">New Paragraph</option>
            <option value="paragraph">Paragraph</option>
            <option value="check">Check</option>
            <option value="circle">Circle</option>
            <option value="cross">Cross</option>
            <option value="star">Star</option>
          </select>
        </div>

        <div class="property-group" id="prop-fill-color-group" style="display: none;">
          <label>Fill Color</label>
          <div class="color-palette-wrapper" id="fill-color-wrapper">
            <button type="button" class="color-picker-button" id="fill-color-btn">
              <div class="color-preview" id="prop-fill-color-preview"></div>
              <span class="color-hex" id="prop-fill-color-hex">#FFFF00</span>
              <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
            </button>
            <div class="color-palette-dropdown" id="fill-color-dropdown">
              <button type="button" class="color-none-btn" id="fill-color-none-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <line x1="4" y1="4" x2="20" y2="20"/>
                </svg>
                None
              </button>
              <div class="color-palette" id="fill-color-palette"></div>
              <button type="button" class="color-custom-btn" id="fill-color-custom-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M12 2a10 10 0 0 1 0 20"/>
                </svg>
                More Colors...
              </button>
            </div>
            <input type="color" id="prop-fill-color">
          </div>
        </div>

        <div class="property-group" id="prop-stroke-color-group" style="display: none;">
          <label>Stroke Color</label>
          <div class="color-palette-wrapper" id="stroke-color-wrapper">
            <button type="button" class="color-picker-button" id="stroke-color-btn">
              <div class="color-preview" id="prop-stroke-color-preview"></div>
              <span class="color-hex" id="prop-stroke-color-hex">#000000</span>
              <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
            </button>
            <div class="color-palette-dropdown" id="stroke-color-dropdown">
              <div class="color-palette" id="stroke-color-palette"></div>
              <button type="button" class="color-custom-btn" id="stroke-color-custom-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M12 2a10 10 0 0 1 0 20"/>
                </svg>
                More Colors...
              </button>
            </div>
            <input type="color" id="prop-stroke-color">
          </div>
        </div>

        <div class="property-group" id="prop-color-group">
          <label>Color</label>
          <div class="color-palette-wrapper" id="main-color-wrapper">
            <button type="button" class="color-picker-button" id="main-color-btn">
              <div class="color-preview" id="prop-color-preview"></div>
              <span class="color-hex" id="prop-color-hex">#000000</span>
              <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
            </button>
            <div class="color-palette-dropdown" id="main-color-dropdown">
              <div class="color-palette" id="main-color-palette"></div>
              <button type="button" class="color-custom-btn" id="main-color-custom-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M12 2a10 10 0 0 1 0 20"/>
                </svg>
                More Colors...
              </button>
            </div>
            <input type="color" id="prop-color">
          </div>
        </div>

        <div class="property-group" id="prop-opacity-group">
          <label>Opacity</label>
          <div class="opacity-slider-wrapper">
            <input type="range" id="prop-opacity" min="0" max="100" value="100">
            <span id="prop-opacity-value">100%</span>
          </div>
        </div>

        <div class="property-group" id="prop-line-width-group">
          <label>Line Width</label>
          <input type="number" id="prop-line-width" min="1" max="20">
        </div>

        <div class="property-group" id="prop-border-style-group" style="display: none;">
          <label>Border Style</label>
          <select id="prop-border-style">
            <option value="solid">Solid</option>
            <option value="dashed">Dashed</option>
            <option value="dotted">Dotted</option>
          </select>
        </div>
      </div>

      <!-- Line Endings Section (for arrow) -->
      <div class="property-section" id="prop-line-endings-section" style="display: none;">
        <div class="property-section-header">Line Endings</div>

        <div class="property-group" id="prop-arrow-start-group">
          <label>Start</label>
          <select id="prop-arrow-start">
            <option value="none">None</option>
            <option value="open">Open Arrow</option>
            <option value="closed">Closed Arrow</option>
            <option value="diamond">Diamond</option>
            <option value="circle">Circle</option>
            <option value="square">Square</option>
            <option value="slash">Slash</option>
          </select>
        </div>

        <div class="property-group" id="prop-arrow-end-group">
          <label>End</label>
          <select id="prop-arrow-end">
            <option value="none">None</option>
            <option value="open" selected>Open Arrow</option>
            <option value="closed">Closed Arrow</option>
            <option value="diamond">Diamond</option>
            <option value="circle">Circle</option>
            <option value="square">Square</option>
            <option value="slash">Slash</option>
          </select>
        </div>

        <div class="property-group" id="prop-arrow-head-size-group">
          <label>Head Size</label>
          <input type="number" id="prop-arrow-head-size" min="4" max="40" value="12">
        </div>
      </div>

      <!-- Size & Dimensions Section (for arrow) -->
      <div class="property-section" id="prop-dimensions-section" style="display: none;">
        <div class="property-section-header">Size & Dimensions</div>

        <div class="property-group" id="prop-arrow-length-group">
          <label>Length</label>
          <input type="text" id="prop-arrow-length" readonly>
        </div>
      </div>

      <!-- Text Formatting Section (for textbox/callout) -->
      <div class="property-section" id="prop-text-format-section" style="display: none;">
        <div class="property-section-header">Character</div>

        <div class="property-group">
          <label>Text Color</label>
          <div class="color-palette-wrapper" id="text-color-wrapper">
            <button type="button" class="color-picker-button" id="text-color-btn">
              <div class="color-preview" id="prop-text-color-preview"></div>
              <span class="color-hex" id="prop-text-color-hex">#000000</span>
              <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
            </button>
            <div class="color-palette-dropdown" id="text-color-dropdown">
              <div class="color-palette" id="text-color-palette"></div>
              <button type="button" class="color-custom-btn" id="text-color-custom-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M12 2a10 10 0 0 1 0 20"/>
                </svg>
                More Colors...
              </button>
            </div>
            <input type="color" id="prop-text-color" value="#000000">
          </div>
        </div>

        <div class="property-group">
          <label>Font</label>
          <select id="prop-font-family">
            <option value="Arial">Arial</option>
            <option value="Helvetica">Helvetica</option>
            <option value="Times New Roman">Times New Roman</option>
            <option value="Georgia">Georgia</option>
            <option value="Courier New">Courier New</option>
            <option value="Verdana">Verdana</option>
            <option value="Tahoma">Tahoma</option>
            <option value="Trebuchet MS">Trebuchet MS</option>
            <option value="Impact">Impact</option>
            <option value="Comic Sans MS">Comic Sans MS</option>
          </select>
        </div>

        <div class="property-group">
          <label>Font Size</label>
          <select id="prop-text-font-size">
            <option value="8">8 pt</option>
            <option value="9">9 pt</option>
            <option value="10">10 pt</option>
            <option value="11">11 pt</option>
            <option value="12">12 pt</option>
            <option value="14" selected>14 pt</option>
            <option value="16">16 pt</option>
            <option value="18">18 pt</option>
            <option value="20">20 pt</option>
            <option value="24">24 pt</option>
            <option value="28">28 pt</option>
            <option value="32">32 pt</option>
            <option value="36">36 pt</option>
            <option value="48">48 pt</option>
            <option value="72">72 pt</option>
          </select>
        </div>

        <div class="property-group">
          <label>Style</label>
          <div class="text-style-buttons">
            <button type="button" class="text-style-btn" id="prop-text-bold" title="Bold">
              <strong>B</strong>
            </button>
            <button type="button" class="text-style-btn" id="prop-text-italic" title="Italic">
              <em>I</em>
            </button>
            <button type="button" class="text-style-btn" id="prop-text-underline" title="Underline">
              <u>U</u>
            </button>
            <button type="button" class="text-style-btn" id="prop-text-strikethrough" title="Strikethrough">
              <s>S</s>
            </button>
          </div>
        </div>
      </div>

      <!-- Paragraph Section (for textbox/callout) -->
      <div class="property-section" id="prop-paragraph-section" style="display: none;">
        <div class="property-section-header">Paragraph</div>

        <div class="property-group">
          <label>Text Alignment</label>
          <div class="text-align-buttons">
            <button type="button" class="text-align-btn active" id="prop-align-left" title="Align Left">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 6h18M3 12h12M3 18h18"/>
              </svg>
            </button>
            <button type="button" class="text-align-btn" id="prop-align-center" title="Align Center">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 6h18M6 12h12M3 18h18"/>
              </svg>
            </button>
            <button type="button" class="text-align-btn" id="prop-align-right" title="Align Right">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 6h18M9 12h12M3 18h18"/>
              </svg>
            </button>
          </div>
        </div>

        <div class="property-group">
          <label>Line Spacing</label>
          <select id="prop-line-spacing">
            <option value="1">1x</option>
            <option value="1.15">1.15x</option>
            <option value="1.5" selected>1.5x</option>
            <option value="2">2x</option>
            <option value="2.5">2.5x</option>
            <option value="3">3x</option>
          </select>
        </div>
      </div>

      <!-- Content Section (for text/comments) -->
      <div class="property-section" id="prop-content-section" style="display: none;">
        <div class="property-section-header">Content</div>

        <div class="property-group" id="prop-text-group">
          <label>Text</label>
          <textarea id="prop-text" rows="4"></textarea>
        </div>

        <div class="property-group" id="prop-font-size-group" style="display: none;">
          <label>Font Size</label>
          <input type="number" id="prop-font-size" min="8" max="72">
        </div>
      </div>

      <!-- Image Section -->
      <div class="property-section" id="prop-image-section" style="display: none;">
        <div class="property-section-header">Image</div>

        <div class="property-group">
          <label>Width</label>
          <input type="number" id="prop-image-width" min="20" max="2000">
        </div>

        <div class="property-group">
          <label>Height</label>
          <input type="number" id="prop-image-height" min="20" max="2000">
        </div>

        <div class="property-group">
          <label>Rotation</label>
          <input type="number" id="prop-image-rotation" min="-360" max="360" step="1">
        </div>

        <div class="property-group property-group-full">
          <button type="button" class="property-btn secondary" id="prop-image-reset">Reset to Original Size</button>
        </div>
      </div>

      <div class="property-actions" id="prop-actions-section">
        <button class="property-btn delete" id="prop-delete">Delete</button>
        <button class="property-btn close" id="prop-close">Close</button>
      </div>
    </div>
  </div>

  <!-- Status Bar -->
  <div class="status-bar">
    <div class="status-bar-left">
      <div class="status-item">
        <span class="status-item-label">Tool:</span>
        <span class="status-item-value" id="status-tool">Select</span>
      </div>
      <div class="status-separator"></div>
      <div class="status-item">
        <span class="status-item-label">Annotations:</span>
        <span class="status-item-value" id="status-annotations">0</span>
      </div>
    </div>
    <div class="status-bar-center" id="pdf-controls" style="display: none;">
      <button class="status-nav-btn" id="prev-page" title="Previous Page">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </button>
      <span class="status-page-info" id="page-info">Page <input type="number" class="status-page-input" id="page-input" value="1" min="1"> / <span id="page-total">1</span></span>
      <button class="status-nav-btn" id="next-page" title="Next Page">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
      </button>
      <div class="status-zoom-controls">
        <button class="status-nav-btn" id="zoom-out" title="Zoom Out">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/>
          </svg>
        </button>
        <input type="text" class="status-zoom-input" id="zoom-input" value="150%">
        <button class="status-nav-btn" id="zoom-in" title="Zoom In">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
          </svg>
        </button>
      </div>
    </div>
    <div class="status-bar-right">
      <div class="status-item" id="status-message">Ready</div>
    </div>
  </div>

  <!-- Page Controls (hidden - moved to status bar) -->
  <div class="page-controls" id="page-controls" style="display: none !important;">
    <button class="page-btn" id="prev-page-old">Previous</button>
    <span class="page-info" id="page-info-old">Page 1 / 1</span>
    <button class="page-btn" id="next-page-old">Next</button>
    <div class="zoom-controls">
      <span style="font-size: 12px;">Zoom:</span>
      <button class="page-btn" id="zoom-out-old">-</button>
      <span id="zoom-level-old" style="font-size: 12px;">150%</span>
      <button class="page-btn" id="zoom-in-old">+</button>
    </div>
  </div>

  <!-- Document Properties Dialog -->
  <div class="doc-props-overlay" id="doc-props-dialog">
    <div class="doc-props-dialog">
      <div class="doc-props-header">
        <h2>Document Properties</h2>
        <button class="doc-props-close-btn" id="doc-props-close-btn">&times;</button>
      </div>
      <div class="doc-props-content">
        <div class="doc-props-section">
          <h3>File</h3>
          <div class="doc-props-row">
            <span class="doc-props-label">File Name:</span>
            <span class="doc-props-value" id="doc-prop-filename">-</span>
          </div>
          <div class="doc-props-row">
            <span class="doc-props-label">File Path:</span>
            <span class="doc-props-value" id="doc-prop-filepath">-</span>
          </div>
          <div class="doc-props-row">
            <span class="doc-props-label">File Size:</span>
            <span class="doc-props-value" id="doc-prop-filesize">-</span>
          </div>
        </div>
        <div class="doc-props-section">
          <h3>Document</h3>
          <div class="doc-props-row">
            <span class="doc-props-label">Title:</span>
            <span class="doc-props-value" id="doc-prop-title">-</span>
          </div>
          <div class="doc-props-row">
            <span class="doc-props-label">Author:</span>
            <span class="doc-props-value" id="doc-prop-author">-</span>
          </div>
          <div class="doc-props-row">
            <span class="doc-props-label">Subject:</span>
            <span class="doc-props-value" id="doc-prop-subject">-</span>
          </div>
          <div class="doc-props-row">
            <span class="doc-props-label">Keywords:</span>
            <span class="doc-props-value" id="doc-prop-keywords">-</span>
          </div>
          <div class="doc-props-row">
            <span class="doc-props-label">Creator:</span>
            <span class="doc-props-value" id="doc-prop-creator">-</span>
          </div>
          <div class="doc-props-row">
            <span class="doc-props-label">Producer:</span>
            <span class="doc-props-value" id="doc-prop-producer">-</span>
          </div>
        </div>
        <div class="doc-props-section">
          <h3>PDF Information</h3>
          <div class="doc-props-row">
            <span class="doc-props-label">PDF Version:</span>
            <span class="doc-props-value" id="doc-prop-pdfversion">-</span>
          </div>
          <div class="doc-props-row">
            <span class="doc-props-label">Page Count:</span>
            <span class="doc-props-value" id="doc-prop-pagecount">-</span>
          </div>
          <div class="doc-props-row">
            <span class="doc-props-label">Page Size:</span>
            <span class="doc-props-value" id="doc-prop-pagesize">-</span>
          </div>
          <div class="doc-props-row">
            <span class="doc-props-label">Creation Date:</span>
            <span class="doc-props-value" id="doc-prop-created">-</span>
          </div>
          <div class="doc-props-row">
            <span class="doc-props-label">Modified Date:</span>
            <span class="doc-props-value" id="doc-prop-modified">-</span>
          </div>
        </div>
      </div>
      <div class="doc-props-footer">
        <button id="doc-props-ok-btn">OK</button>
      </div>
    </div>
  </div>

  <!-- Preferences Dialog -->
  <div class="preferences-overlay" id="preferences-dialog">
    <div class="preferences-dialog">
      <div class="preferences-header">
        <h2>Preferences</h2>
        <button class="preferences-close-btn" id="pref-close-btn">&times;</button>
      </div>
      <div class="preferences-content">
        <!-- Tabs -->
        <div class="pref-tabs">
          <button class="pref-tab active" data-pref-tab="general">General</button>
          <button class="pref-tab" data-pref-tab="annotations">Annotations</button>
          <button class="pref-tab" data-pref-tab="shapes">Shapes</button>
          <button class="pref-tab" data-pref-tab="behavior">Behavior</button>
          <button class="pref-tab" data-pref-tab="fileassoc">File Association</button>
        </div>

        <!-- General Tab -->
        <div class="pref-tab-content active" id="pref-tab-general">
          <!-- Reserved for future general settings -->
        </div>

        <!-- Annotations Tab (TextBox & Callout) -->
        <div class="pref-tab-content" id="pref-tab-annotations">
          <div class="preferences-section">
            <h3>General Defaults</h3>
            <div class="pref-row">
              <label>Default Annotation Color</label>
              <div class="pref-color-wrapper" id="pref-default-color-wrapper">
                <button type="button" class="color-picker-button" id="pref-default-color-btn">
                  <div class="color-preview" id="pref-default-color-preview" style="background: #ffff00;"></div>
                  <span class="color-hex" id="pref-default-color-hex">#FFFF00</span>
                  <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 9l6 6 6-6"/>
                  </svg>
                </button>
                <div class="color-palette-dropdown" id="pref-default-color-dropdown">
                  <div class="color-palette" id="pref-default-color-palette"></div>
                  <button type="button" class="color-custom-btn" id="pref-default-color-custom-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M12 2a10 10 0 0 1 0 20"/>
                    </svg>
                    More Colors...
                  </button>
                </div>
                <input type="color" id="pref-default-color" value="#ffff00">
              </div>
            </div>
            <div class="pref-row">
              <label for="pref-default-line-width">Default Line Width</label>
              <input type="number" id="pref-default-line-width" min="1" max="20" value="3">
            </div>
            <div class="pref-row">
              <label for="pref-default-font-size">Default Font Size</label>
              <input type="number" id="pref-default-font-size" min="8" max="72" value="16">
            </div>
            <div class="pref-row">
              <label for="pref-highlight-opacity">Highlight Opacity (%)</label>
              <input type="number" id="pref-highlight-opacity" min="10" max="100" value="30">
            </div>
          </div>

          <div class="preferences-section">
            <h3>Text Box Defaults</h3>
            <div class="pref-row">
              <label>Fill Color</label>
              <div class="pref-color-row">
                <label class="pref-fill-none-checkbox">
                  <input type="checkbox" id="pref-textbox-fill-none">
                  <span>None</span>
                </label>
                <div class="pref-color-wrapper" id="pref-textbox-fill-color-wrapper">
                  <button type="button" class="color-picker-button" id="pref-textbox-fill-color-btn">
                    <div class="color-preview" id="pref-textbox-fill-color-preview" style="background: #ffffd0;"></div>
                    <span class="color-hex" id="pref-textbox-fill-color-hex">#FFFFD0</span>
                    <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M6 9l6 6 6-6"/>
                    </svg>
                  </button>
                  <div class="color-palette-dropdown" id="pref-textbox-fill-color-dropdown">
                    <div class="color-palette" id="pref-textbox-fill-color-palette"></div>
                    <button type="button" class="color-custom-btn" id="pref-textbox-fill-color-custom-btn">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 2a10 10 0 0 1 0 20"/>
                      </svg>
                      More Colors...
                    </button>
                  </div>
                  <input type="color" id="pref-textbox-fill-color" value="#ffffd0">
                </div>
              </div>
            </div>
            <div class="pref-row">
              <label>Stroke Color</label>
              <div class="pref-color-wrapper" id="pref-textbox-stroke-color-wrapper">
                <button type="button" class="color-picker-button" id="pref-textbox-stroke-color-btn">
                  <div class="color-preview" id="pref-textbox-stroke-color-preview" style="background: #000000;"></div>
                  <span class="color-hex" id="pref-textbox-stroke-color-hex">#000000</span>
                  <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 9l6 6 6-6"/>
                  </svg>
                </button>
                <div class="color-palette-dropdown" id="pref-textbox-stroke-color-dropdown">
                  <div class="color-palette" id="pref-textbox-stroke-color-palette"></div>
                  <button type="button" class="color-custom-btn" id="pref-textbox-stroke-color-custom-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M12 2a10 10 0 0 1 0 20"/>
                    </svg>
                    More Colors...
                  </button>
                </div>
                <input type="color" id="pref-textbox-stroke-color" value="#000000">
              </div>
            </div>
            <div class="pref-row">
              <label for="pref-textbox-border-width">Border Width</label>
              <input type="number" id="pref-textbox-border-width" min="0" max="10" value="1">
            </div>
            <div class="pref-row">
              <label for="pref-textbox-border-style">Border Style</label>
              <select id="pref-textbox-border-style">
                <option value="solid">Solid</option>
                <option value="dashed">Dashed</option>
                <option value="dotted">Dotted</option>
              </select>
            </div>
            <div class="pref-row">
              <label for="pref-textbox-opacity">Opacity (%)</label>
              <input type="number" id="pref-textbox-opacity" min="10" max="100" value="100">
            </div>
            <div class="pref-row">
              <label for="pref-textbox-font-size">Font Size</label>
              <input type="number" id="pref-textbox-font-size" min="8" max="72" value="14">
            </div>
          </div>

          <div class="preferences-section">
            <h3>Callout Defaults</h3>
            <div class="pref-row">
              <label>Fill Color</label>
              <div class="pref-color-row">
                <label class="pref-fill-none-checkbox">
                  <input type="checkbox" id="pref-callout-fill-none">
                  <span>None</span>
                </label>
                <div class="pref-color-wrapper" id="pref-callout-fill-color-wrapper">
                  <button type="button" class="color-picker-button" id="pref-callout-fill-color-btn">
                    <div class="color-preview" id="pref-callout-fill-color-preview" style="background: #ffffd0;"></div>
                    <span class="color-hex" id="pref-callout-fill-color-hex">#FFFFD0</span>
                    <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M6 9l6 6 6-6"/>
                    </svg>
                  </button>
                  <div class="color-palette-dropdown" id="pref-callout-fill-color-dropdown">
                    <div class="color-palette" id="pref-callout-fill-color-palette"></div>
                    <button type="button" class="color-custom-btn" id="pref-callout-fill-color-custom-btn">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 2a10 10 0 0 1 0 20"/>
                      </svg>
                      More Colors...
                    </button>
                  </div>
                  <input type="color" id="pref-callout-fill-color" value="#ffffd0">
                </div>
              </div>
            </div>
            <div class="pref-row">
              <label>Stroke Color</label>
              <div class="pref-color-wrapper" id="pref-callout-stroke-color-wrapper">
                <button type="button" class="color-picker-button" id="pref-callout-stroke-color-btn">
                  <div class="color-preview" id="pref-callout-stroke-color-preview" style="background: #000000;"></div>
                  <span class="color-hex" id="pref-callout-stroke-color-hex">#000000</span>
                  <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 9l6 6 6-6"/>
                  </svg>
                </button>
                <div class="color-palette-dropdown" id="pref-callout-stroke-color-dropdown">
                  <div class="color-palette" id="pref-callout-stroke-color-palette"></div>
                  <button type="button" class="color-custom-btn" id="pref-callout-stroke-color-custom-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M12 2a10 10 0 0 1 0 20"/>
                    </svg>
                    More Colors...
                  </button>
                </div>
                <input type="color" id="pref-callout-stroke-color" value="#000000">
              </div>
            </div>
            <div class="pref-row">
              <label for="pref-callout-border-width">Border Width</label>
              <input type="number" id="pref-callout-border-width" min="0" max="10" value="1">
            </div>
            <div class="pref-row">
              <label for="pref-callout-border-style">Border Style</label>
              <select id="pref-callout-border-style">
                <option value="solid">Solid</option>
                <option value="dashed">Dashed</option>
                <option value="dotted">Dotted</option>
              </select>
            </div>
            <div class="pref-row">
              <label for="pref-callout-opacity">Opacity (%)</label>
              <input type="number" id="pref-callout-opacity" min="10" max="100" value="100">
            </div>
            <div class="pref-row">
              <label for="pref-callout-font-size">Font Size</label>
              <input type="number" id="pref-callout-font-size" min="8" max="72" value="14">
            </div>
          </div>
        </div>

        <!-- Shapes Tab (Rectangle, Circle) -->
        <div class="pref-tab-content" id="pref-tab-shapes">
          <div class="preferences-section">
            <h3>Rectangle Defaults</h3>
            <div class="pref-row">
              <label>Fill Color</label>
              <div class="pref-color-row">
                <label class="pref-fill-none-checkbox">
                  <input type="checkbox" id="pref-rect-fill-none" checked>
                  <span>None</span>
                </label>
                <div class="pref-color-wrapper" id="pref-rect-fill-color-wrapper">
                  <button type="button" class="color-picker-button" id="pref-rect-fill-color-btn" disabled>
                    <div class="color-preview" id="pref-rect-fill-color-preview" style="background: #ffff00;"></div>
                    <span class="color-hex" id="pref-rect-fill-color-hex">#FFFF00</span>
                    <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M6 9l6 6 6-6"/>
                    </svg>
                  </button>
                  <div class="color-palette-dropdown" id="pref-rect-fill-color-dropdown">
                    <div class="color-palette" id="pref-rect-fill-color-palette"></div>
                    <button type="button" class="color-custom-btn" id="pref-rect-fill-color-custom-btn">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 2a10 10 0 0 1 0 20"/>
                      </svg>
                      More Colors...
                    </button>
                  </div>
                  <input type="color" id="pref-rect-fill-color" value="#ffff00">
                </div>
              </div>
            </div>
            <div class="pref-row">
              <label>Stroke Color</label>
              <div class="pref-color-wrapper" id="pref-rect-stroke-color-wrapper">
                <button type="button" class="color-picker-button" id="pref-rect-stroke-color-btn">
                  <div class="color-preview" id="pref-rect-stroke-color-preview" style="background: #000000;"></div>
                  <span class="color-hex" id="pref-rect-stroke-color-hex">#000000</span>
                  <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 9l6 6 6-6"/>
                  </svg>
                </button>
                <div class="color-palette-dropdown" id="pref-rect-stroke-color-dropdown">
                  <div class="color-palette" id="pref-rect-stroke-color-palette"></div>
                  <button type="button" class="color-custom-btn" id="pref-rect-stroke-color-custom-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M12 2a10 10 0 0 1 0 20"/>
                    </svg>
                    More Colors...
                  </button>
                </div>
                <input type="color" id="pref-rect-stroke-color" value="#000000">
              </div>
            </div>
            <div class="pref-row">
              <label for="pref-rect-border-width">Border Width</label>
              <input type="number" id="pref-rect-border-width" min="1" max="20" value="2">
            </div>
            <div class="pref-row">
              <label for="pref-rect-border-style">Border Style</label>
              <select id="pref-rect-border-style">
                <option value="solid">Solid</option>
                <option value="dashed">Dashed</option>
                <option value="dotted">Dotted</option>
              </select>
            </div>
            <div class="pref-row">
              <label for="pref-rect-opacity">Opacity (%)</label>
              <input type="number" id="pref-rect-opacity" min="10" max="100" value="100">
            </div>
          </div>

          <div class="preferences-section">
            <h3>Ellipse Defaults</h3>
            <div class="pref-row">
              <label>Fill Color</label>
              <div class="pref-color-row">
                <label class="pref-fill-none-checkbox">
                  <input type="checkbox" id="pref-circle-fill-none" checked>
                  <span>None</span>
                </label>
                <div class="pref-color-wrapper" id="pref-circle-fill-color-wrapper">
                  <button type="button" class="color-picker-button" id="pref-circle-fill-color-btn" disabled>
                    <div class="color-preview" id="pref-circle-fill-color-preview" style="background: #ffff00;"></div>
                    <span class="color-hex" id="pref-circle-fill-color-hex">#FFFF00</span>
                    <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M6 9l6 6 6-6"/>
                    </svg>
                  </button>
                  <div class="color-palette-dropdown" id="pref-circle-fill-color-dropdown">
                    <div class="color-palette" id="pref-circle-fill-color-palette"></div>
                    <button type="button" class="color-custom-btn" id="pref-circle-fill-color-custom-btn">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 2a10 10 0 0 1 0 20"/>
                      </svg>
                      More Colors...
                    </button>
                  </div>
                  <input type="color" id="pref-circle-fill-color" value="#ffff00">
                </div>
              </div>
            </div>
            <div class="pref-row">
              <label>Stroke Color</label>
              <div class="pref-color-wrapper" id="pref-circle-stroke-color-wrapper">
                <button type="button" class="color-picker-button" id="pref-circle-stroke-color-btn">
                  <div class="color-preview" id="pref-circle-stroke-color-preview" style="background: #000000;"></div>
                  <span class="color-hex" id="pref-circle-stroke-color-hex">#000000</span>
                  <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 9l6 6 6-6"/>
                  </svg>
                </button>
                <div class="color-palette-dropdown" id="pref-circle-stroke-color-dropdown">
                  <div class="color-palette" id="pref-circle-stroke-color-palette"></div>
                  <button type="button" class="color-custom-btn" id="pref-circle-stroke-color-custom-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M12 2a10 10 0 0 1 0 20"/>
                    </svg>
                    More Colors...
                  </button>
                </div>
                <input type="color" id="pref-circle-stroke-color" value="#000000">
              </div>
            </div>
            <div class="pref-row">
              <label for="pref-circle-border-width">Border Width</label>
              <input type="number" id="pref-circle-border-width" min="1" max="20" value="2">
            </div>
            <div class="pref-row">
              <label for="pref-circle-border-style">Border Style</label>
              <select id="pref-circle-border-style">
                <option value="solid">Solid</option>
                <option value="dashed">Dashed</option>
                <option value="dotted">Dotted</option>
              </select>
            </div>
            <div class="pref-row">
              <label for="pref-circle-opacity">Opacity (%)</label>
              <input type="number" id="pref-circle-opacity" min="10" max="100" value="100">
            </div>
          </div>
        </div>

        <!-- Behavior Tab -->
        <div class="pref-tab-content" id="pref-tab-behavior">
          <div class="preferences-section">
            <h3>Startup</h3>
            <div class="pref-row pref-checkbox-row">
              <label class="pref-checkbox-label">
                <input type="checkbox" id="pref-restore-session">
                <span>Restore last session when application starts</span>
              </label>
            </div>
          </div>

          <div class="preferences-section">
            <h3>Author</h3>
            <div class="pref-row">
              <label for="pref-author-name">Default Author Name</label>
              <input type="text" id="pref-author-name" value="User">
            </div>
          </div>

          <div class="preferences-section">
            <h3>Snapping</h3>
            <div class="pref-row">
              <label for="pref-angle-snap">Angle Snap (degrees)</label>
              <input type="number" id="pref-angle-snap" min="1" max="90" value="30">
            </div>
            <div class="pref-row pref-checkbox-row">
              <label class="pref-checkbox-label">
                <input type="checkbox" id="pref-enable-angle-snap" checked>
                <span>Enable Angle Snapping (hold Shift)</span>
              </label>
            </div>
            <div class="pref-row">
              <label for="pref-grid-size">Grid Size (pixels)</label>
              <input type="number" id="pref-grid-size" min="5" max="100" value="10">
            </div>
            <div class="pref-row pref-checkbox-row">
              <label class="pref-checkbox-label">
                <input type="checkbox" id="pref-enable-grid-snap">
                <span>Enable Grid Snapping</span>
              </label>
            </div>
          </div>

          <div class="preferences-section">
            <h3>Creation</h3>
            <div class="pref-row pref-checkbox-row">
              <label class="pref-checkbox-label">
                <input type="checkbox" id="pref-auto-select" checked>
                <span>Auto-select annotation after creation</span>
              </label>
            </div>
          </div>

          <div class="preferences-section">
            <h3>Deletion</h3>
            <div class="pref-row pref-checkbox-row">
              <label class="pref-checkbox-label">
                <input type="checkbox" id="pref-confirm-delete" checked>
                <span>Confirm before deleting annotations</span>
              </label>
            </div>
          </div>
        </div>

        <!-- File Association Tab -->
        <div class="pref-tab-content" id="pref-tab-fileassoc">
          <div class="preferences-section">
            <h3>Default PDF Application</h3>
            <div class="pref-row">
              <label>Current default:</label>
              <span id="pref-current-pdf-app" style="font-size: 11px; color: #666;">Checking...</span>
            </div>
            <div class="pref-row" style="margin-top: 12px;">
              <button type="button" class="pref-btn pref-btn-secondary" id="pref-set-default-app" style="width: 100%;">
                Set OpenPDFStudio as Default PDF Viewer
              </button>
            </div>
            <p style="font-size: 10px; color: #888; margin-top: 12px; line-height: 1.4;">
              This will open your system settings where you can select OpenPDFStudio as the default application for opening PDF files.
            </p>
          </div>
        </div>
      </div>
      <div class="preferences-footer">
        <button class="pref-btn pref-btn-secondary" id="pref-reset-btn">Reset to Defaults</button>
        <div class="pref-footer-right">
          <button class="pref-btn pref-btn-secondary" id="pref-cancel-btn">Cancel</button>
          <button class="pref-btn pref-btn-primary" id="pref-save-btn">Save</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Annotation Context Menu -->
  <div class="context-menu" id="annotation-context-menu">
    <div class="context-menu-item" data-action="open-popup">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M2 2h12v10H6l-4 3v-3H2V2zm1 1v8h1v2l2.5-2H13V3H3z"/></svg>
      </span>
      <span class="context-menu-label">Open Pop-Up Note</span>
    </div>
    <div class="context-menu-item" data-action="hide-popup">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M2 2h12v10H6l-4 3v-3H2V2zm1 1v8h1v2l2.5-2H13V3H3z" opacity="0.4"/></svg>
      </span>
      <span class="context-menu-label">Hide Pop-Up Note</span>
    </div>
    <div class="context-menu-item" data-action="reset-popup">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 3a5 5 0 1 0 4.546 2.914l.908-.419A6 6 0 1 1 8 2v1z"/><path d="M8 0v4l3-2-3-2z"/></svg>
      </span>
      <span class="context-menu-label">Reset Pop-Up Note Location</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="cut">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M4 2.5a2.5 2.5 0 1 1 3.164 2.414L8.5 7.25l1.336-2.336a2.5 2.5 0 1 1 1.414 0L9.914 7.25 13 12.5V14H3v-1.5L6.086 7.25 4.75 4.914A2.5 2.5 0 0 1 4 2.5zm2.5 1a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm5 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0z"/></svg>
      </span>
      <span class="context-menu-label">Cut</span>
      <span class="context-menu-shortcut">Ctrl+X</span>
    </div>
    <div class="context-menu-item" data-action="copy">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6z"/><path d="M2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2z"/></svg>
      </span>
      <span class="context-menu-label">Copy</span>
      <span class="context-menu-shortcut">Ctrl+C</span>
    </div>
    <div class="context-menu-item" data-action="paste">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2z"/></svg>
      </span>
      <span class="context-menu-label">Paste</span>
      <span class="context-menu-shortcut">Ctrl+V</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="delete">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/><path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1z"/></svg>
      </span>
      <span class="context-menu-label">Delete</span>
      <span class="context-menu-shortcut">Delete</span>
    </div>
    <div class="context-menu-item" data-action="flatten">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M1 3.5A1.5 1.5 0 0 1 2.5 2h11A1.5 1.5 0 0 1 15 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 1 12.5v-9z"/></svg>
      </span>
      <span class="context-menu-label">Flatten</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="add-reply">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M5 3l-.65.65 3.5 3.5H1v1h6.85l-3.5 3.5.65.65 4.5-4.5L5 3z"/><path d="M10 2h4v12h-4v-1h3V3h-3V2z"/></svg>
      </span>
      <span class="context-menu-label">Add Reply</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item context-menu-checkbox" data-action="locked">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/></svg>
      </span>
      <span class="context-menu-label">Locked</span>
      <span class="context-menu-check"></span>
    </div>
    <div class="context-menu-item context-menu-checkbox" data-action="marked">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M2 2v13.5a.5.5 0 0 0 .74.439L8 13.069l5.26 2.87A.5.5 0 0 0 14 15.5V2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2z"/></svg>
      </span>
      <span class="context-menu-label">Marked</span>
      <span class="context-menu-check"></span>
    </div>
    <div class="context-menu-item context-menu-checkbox checked" data-action="printable">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M5 1a2 2 0 0 0-2 2v1h10V3a2 2 0 0 0-2-2H5zm6 8H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1z"/><path d="M0 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2H2a2 2 0 0 1-2-2V7zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/></svg>
      </span>
      <span class="context-menu-label">Printable</span>
      <span class="context-menu-check"></span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item context-menu-submenu" data-action="status">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3.5a.5.5 0 0 1-.5-.5v-3.5A.5.5 0 0 1 8 4z"/></svg>
      </span>
      <span class="context-menu-label">Status</span>
      <span class="context-menu-arrow"></span>
    </div>
    <div class="context-menu-item" data-action="review-history">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/></svg>
      </span>
      <span class="context-menu-label">Review History...</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item context-menu-submenu" data-action="layer">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8.235 1.559a.5.5 0 0 0-.47 0l-7.5 4a.5.5 0 0 0 0 .882L3.188 8 .264 9.559a.5.5 0 0 0 0 .882l7.5 4a.5.5 0 0 0 .47 0l7.5-4a.5.5 0 0 0 0-.882L12.813 8l2.922-1.559a.5.5 0 0 0 0-.882l-7.5-4z"/></svg>
      </span>
      <span class="context-menu-label">Layer: <span class="context-menu-value">None</span></span>
      <span class="context-menu-arrow"></span>
    </div>
    <div class="context-menu-item context-menu-submenu" data-action="arrange">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2z"/></svg>
      </span>
      <span class="context-menu-label">Arrange</span>
      <span class="context-menu-arrow"></span>
      <div class="context-menu-submenu-content">
        <div class="arrange-icon-grid">
          <button class="arrange-icon-btn" data-action="bring-to-front" title="Bring to Front">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="10" height="10" fill="#4a90d9" stroke="#2d5a8a"/>
              <rect x="11" y="11" width="10" height="10" fill="#f0f0f0" stroke="#999"/>
            </svg>
          </button>
          <button class="arrange-icon-btn" data-action="send-to-back" title="Send to Back">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="11" y="11" width="10" height="10" fill="#4a90d9" stroke="#2d5a8a"/>
              <rect x="3" y="3" width="10" height="10" fill="#f0f0f0" stroke="#999"/>
            </svg>
          </button>
          <button class="arrange-icon-btn" data-action="bring-forward" title="Bring Forward">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="8" width="8" height="8" fill="#ddd" stroke="#999"/>
              <rect x="8" y="5" width="8" height="8" fill="#4a90d9" stroke="#2d5a8a"/>
              <rect x="13" y="8" width="8" height="8" fill="#f0f0f0" stroke="#999"/>
            </svg>
          </button>
          <button class="arrange-icon-btn" data-action="send-backward" title="Send Backward">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="8" width="8" height="8" fill="#f0f0f0" stroke="#999"/>
              <rect x="8" y="5" width="8" height="8" fill="#4a90d9" stroke="#2d5a8a"/>
              <rect x="13" y="8" width="8" height="8" fill="#ddd" stroke="#999"/>
            </svg>
          </button>
        </div>
        <div class="arrange-icon-grid">
          <button class="arrange-icon-btn" data-action="rotate-left" title="Rotate Left 90">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 12a8 8 0 0 1 14-5.3" stroke="#4a90d9"/>
              <path d="M4 7v5h5" stroke="#4a90d9" fill="none"/>
              <polygon points="10,10 18,10 18,18 10,18" fill="#4a90d9" stroke="#2d5a8a"/>
            </svg>
          </button>
          <button class="arrange-icon-btn" data-action="rotate-right" title="Rotate Right 90">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 12a8 8 0 0 0-14-5.3" stroke="#4a90d9"/>
              <path d="M20 7v5h-5" stroke="#4a90d9" fill="none"/>
              <polygon points="6,10 14,10 14,18 6,18" fill="#4a90d9" stroke="#2d5a8a"/>
            </svg>
          </button>
          <button class="arrange-icon-btn" data-action="flip-horizontal" title="Flip Horizontal">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="4,6 10,6 10,18 4,18" fill="#4a90d9" stroke="#2d5a8a"/>
              <line x1="12" y1="4" x2="12" y2="20" stroke="#999" stroke-dasharray="2,2"/>
              <polygon points="14,6 20,6 20,18 14,18" fill="#f0f0f0" stroke="#999"/>
            </svg>
          </button>
          <button class="arrange-icon-btn" data-action="flip-vertical" title="Flip Vertical">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="6,4 18,4 18,10 6,10" fill="#4a90d9" stroke="#2d5a8a"/>
              <line x1="4" y1="12" x2="20" y2="12" stroke="#999" stroke-dasharray="2,2"/>
              <polygon points="6,14 18,14 18,20 6,20" fill="#f0f0f0" stroke="#999"/>
            </svg>
          </button>
        </div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" data-action="transform">
          <span class="context-menu-icon">
            <svg viewBox="0 0 16 16" fill="currentColor"><path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm4.5 0a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5v-11a.5.5 0 0 0-.5-.5h-7z"/></svg>
          </span>
          <span class="context-menu-label">Transform...</span>
        </div>
        <div class="context-menu-item" data-action="duplicate">
          <span class="context-menu-icon">
            <svg viewBox="0 0 16 16" fill="currentColor"><path d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2z"/></svg>
          </span>
          <span class="context-menu-label">Duplicate</span>
        </div>
      </div>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="flip-line">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 3a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 3zm4 8a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1 0-1h7a.5.5 0 0 1 .5.5z"/><path d="M8 0a.5.5 0 0 1 .5.5v.514A6.5 6.5 0 0 1 14 7.5a.5.5 0 0 1-1 0A5.5 5.5 0 0 0 8.5 2.015V2.5a.5.5 0 0 1-1 0v-.486A5.5 5.5 0 0 0 3 7.5a.5.5 0 0 1-1 0 6.5 6.5 0 0 1 5.5-6.486V.5A.5.5 0 0 1 8 0z"/></svg>
      </span>
      <span class="context-menu-label">Flip Line</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="convert-measurement">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M1 0a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h5v-1H2v-1h4v-1H4v-1h2v-1H2v-1h4V9H4V8h2V7H2V6h4V2h1v4h1V4h1v2h1V2h1v4h1V4h1v2h1V1a1 1 0 0 0-1-1H1z"/></svg>
      </span>
      <span class="context-menu-label">Convert to Measurement</span>
    </div>
    <div class="context-menu-item" data-action="convert-polyline">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M2 2l4 4 4-2 4 6" stroke="currentColor" stroke-width="1.5" fill="none"/><circle cx="2" cy="2" r="1.5"/><circle cx="6" cy="6" r="1.5"/><circle cx="10" cy="4" r="1.5"/><circle cx="14" cy="10" r="1.5"/></svg>
      </span>
      <span class="context-menu-label">Convert to Polyline</span>
    </div>
    <div class="context-menu-item" data-action="convert-polygon">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 1l6 4.5v5L8 15l-6-4.5v-5L8 1z" stroke="currentColor" stroke-width="1" fill="none"/></svg>
      </span>
      <span class="context-menu-label">Convert to Polygon</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item context-menu-submenu" data-action="style-tools">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M15.825.12a.5.5 0 0 1 .132.584c-1.53 3.43-4.743 8.17-7.095 10.64a6.067 6.067 0 0 1-2.373 1.534c-.018.227-.06.538-.16.868-.201.659-.667 1.479-1.708 1.74a8.118 8.118 0 0 1-3.078.132 3.659 3.659 0 0 1-.562-.135 1.382 1.382 0 0 1-.466-.247.714.714 0 0 1-.204-.288.622.622 0 0 1 .004-.443c.095-.245.316-.38.461-.452.394-.197.625-.453.867-.826.095-.144.184-.297.287-.472l.117-.198c.151-.255.326-.54.546-.848.528-.739 1.201-.925 1.746-.896.126.007.243.025.348.048.062-.172.142-.38.238-.608.261-.619.658-1.419 1.187-2.069 2.176-2.67 6.18-6.206 9.117-8.104a.5.5 0 0 1 .596.04z"/></svg>
      </span>
      <span class="context-menu-label">Style Tools</span>
      <span class="context-menu-arrow"></span>
    </div>
    <div class="context-menu-item context-menu-submenu" data-action="export">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/><path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/></svg>
      </span>
      <span class="context-menu-label">Export</span>
      <span class="context-menu-arrow"></span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="properties">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/><path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319z"/></svg>
      </span>
      <span class="context-menu-label">Properties...</span>
    </div>
  </div>

  <!-- Page Context Menu (when nothing is selected) -->
  <div class="context-menu" id="page-context-menu">
    <div class="context-menu-item context-menu-submenu" data-action="add-bookmark">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/></svg>
      </span>
      <span class="context-menu-label">Add Bookmark</span>
      <span class="context-menu-shortcut">Ctrl+Shift+B</span>
      <span class="context-menu-arrow"></span>
    </div>
    <div class="context-menu-item" data-action="add-sticky-note">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M2.5 1A1.5 1.5 0 0 0 1 2.5v11A1.5 1.5 0 0 0 2.5 15h6.086a1.5 1.5 0 0 0 1.06-.44l4.915-4.914A1.5 1.5 0 0 0 15 8.586V2.5A1.5 1.5 0 0 0 13.5 1h-11zM2 2.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 .5.5V8H9.5A1.5 1.5 0 0 0 8 9.5V14H2.5a.5.5 0 0 1-.5-.5v-11zm7 11.293V9.5a.5.5 0 0 1 .5-.5h4.293L9 13.793z"/></svg>
      </span>
      <span class="context-menu-label">Add Sticky Note</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="add-image">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/><path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/></svg>
      </span>
      <span class="context-menu-label">Add Image...</span>
    </div>
    <div class="context-menu-item" data-action="add-qr-code">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0v-3zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5zM.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5zM4 4h1v1H4V4zm2 0h1v1H6V4zm2 0h1v1H8V4zm0 2h1v1H8V6zm-2 0h1v1H6V6zm-2 0h1v1H4V6zm8 0h1v1h-1V6zm-2 0h1v1h-1V6zm2-2h1v1h-1V4z"/></svg>
      </span>
      <span class="context-menu-label">Add QR Code...</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item context-menu-checkbox" data-action="tool-hand" id="ctx-tool-hand">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8.5 1.75a.75.75 0 0 0-1.5 0V5h-1V2.75a.75.75 0 0 0-1.5 0V5h-.5A2.5 2.5 0 0 0 1.5 7.5v5A3.5 3.5 0 0 0 5 16h6a3.5 3.5 0 0 0 3.5-3.5v-6A2.5 2.5 0 0 0 12 4h-.5V1.75a.75.75 0 0 0-1.5 0V4h-1V1.75z"/></svg>
      </span>
      <span class="context-menu-label">Hand Tool</span>
      <span class="context-menu-check"></span>
    </div>
    <div class="context-menu-item context-menu-checkbox" data-action="tool-snapshot">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/><path d="M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z"/></svg>
      </span>
      <span class="context-menu-label">Snapshot Tool</span>
      <span class="context-menu-check"></span>
    </div>
    <div class="context-menu-item context-menu-checkbox" data-action="tool-select-text">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M5.5 4a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 1 0V8h3v3.5a.5.5 0 0 0 1 0v-7a.5.5 0 0 0-1 0V7H6V4.5a.5.5 0 0 0-.5-.5z"/><path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2z"/></svg>
      </span>
      <span class="context-menu-label">Select Text</span>
      <span class="context-menu-check"></span>
    </div>
    <div class="context-menu-item context-menu-checkbox" data-action="tool-zoom">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/><path d="M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z"/></svg>
      </span>
      <span class="context-menu-label">Zoom In/Out Tool</span>
      <span class="context-menu-check"></span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item disabled" data-action="cut">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M3.5 3.5c-.614-.884-.074-1.962.858-2.5L8 7.226 11.642 1c.932.538 1.472 1.616.858 2.5L8.81 8.61l1.556 2.661a2.5 2.5 0 1 1-.794.637L8 9.73l-1.572 2.177a2.5 2.5 0 1 1-.794-.637L7.19 8.61 3.5 3.5zm2.5 10a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0zm7 0a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0z"/></svg>
      </span>
      <span class="context-menu-label">Cut</span>
      <span class="context-menu-shortcut">Ctrl+X</span>
    </div>
    <div class="context-menu-item disabled" data-action="copy">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2z"/></svg>
      </span>
      <span class="context-menu-label">Copy</span>
      <span class="context-menu-shortcut">Ctrl+C</span>
    </div>
    <div class="context-menu-item" data-action="paste">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg>
      </span>
      <span class="context-menu-label">Paste</span>
      <span class="context-menu-shortcut">Ctrl+V</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item disabled" data-action="delete">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/><path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/></svg>
      </span>
      <span class="context-menu-label">Delete</span>
      <span class="context-menu-shortcut">Delete</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="select-all">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z"/></svg>
      </span>
      <span class="context-menu-label">Select</span>
    </div>
    <div class="context-menu-item" data-action="deselect">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H2zm0-1h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2z"/></svg>
      </span>
      <span class="context-menu-label">Deselect</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item context-menu-submenu" data-action="go-to">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"/></svg>
      </span>
      <span class="context-menu-label">Go To</span>
      <span class="context-menu-arrow"></span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="print">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/><path d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"/></svg>
      </span>
      <span class="context-menu-label">Print...</span>
      <span class="context-menu-shortcut">Ctrl+P</span>
    </div>
    <div class="context-menu-item" data-action="find">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/></svg>
      </span>
      <span class="context-menu-label">Find...</span>
      <span class="context-menu-shortcut">Ctrl+F</span>
    </div>
    <div class="context-menu-item" data-action="search">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/><path d="M3 6.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/></svg>
      </span>
      <span class="context-menu-label">Search...</span>
      <span class="context-menu-shortcut">Ctrl+Shift+F</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="page-properties">
      <span class="context-menu-icon">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/><path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319z"/></svg>
      </span>
      <span class="context-menu-label">Properties...</span>
    </div>
  </div>

  <!-- About Dialog -->
  <div class="about-overlay" id="about-dialog">
    <div class="about-dialog">
      <div class="about-header">
        <button class="about-close-btn" id="about-close-btn">&times;</button>
        <div class="about-logo">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="#667eea" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M14 2V8H20" stroke="#667eea" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M16 13H8" stroke="#764ba2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M16 17H8" stroke="#764ba2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M10 9H9H8" stroke="#764ba2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h1 class="about-app-name">OpenPDFStudio</h1>
        <p class="about-version">Version 1.0.2</p>
      </div>
      <div class="about-content">
        <p class="about-tagline">IT Without Chains</p>
        <p class="about-description">
          A professional PDF editor for viewing, annotating, and editing PDF documents.
          Built with open source technologies.
        </p>
        <div class="about-company">
          <h3 class="about-company-name">OpenAEC Foundation</h3>
          <p class="about-company-desc">
            From the Latin "to share and distribute" - we liberate businesses from vendor lock-in
            through professional open source solutions. Transparent pricing, transparent code.
          </p>
        </div>
        <div class="about-links">
          <a href="#" class="about-link" id="about-website-link">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
            </svg>
            Website
          </a>
          <a href="#" class="about-link" id="about-email-link">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
              <polyline points="22,6 12,13 2,6"/>
            </svg>
            Contact
          </a>
        </div>
        <div class="about-footer">
          <p class="about-copyright">&copy; 2025 OpenAEC Foundation. Licensed under MIT.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay" style="display: none;">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <div class="loading-text">Loading...</div>
    </div>
  </div>

  <script src="js/main.js" type="module"></script>
</body>
</html>
